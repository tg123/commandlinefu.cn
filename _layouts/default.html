<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>{{ page.title }}</title>
        <meta name="viewport" content="width=device-width">

        <link type="text/css" rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.0.2/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="/css/main.css">
        <script type="text/javascript" src="http://cdn.staticfile.org/jquery/2.0.3/jquery.min.js"></script>
        <script type="text/javascript" src="http://cdn.staticfile.org/lunr.js/0.3.3/lunr.min.js"></script>
        <script type="text/javascript" src="http://cdn.staticfile.org/mustache.js/0.7.2/mustache.min.js"></script>
        <script type="text/javascript" src="http://cdn.staticfile.org/URI.js/1.7.2/URI.min.js"></script>
        <script type="text/javascript" src="http://cdn.staticfile.org/waypoints/2.0.3/waypoints.min.js"></script>
        <script type="text/javascript" src="/js/jquery.lunr.search.js"></script>

        <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=559115986" type="text/javascript" charset="utf-8"></script>
    </head>
    <body>
        <div class="navbar navbar-default navbar-fixed-top">
            <div class="container" id="header">
                <a class="navbar-brand" id="header-logo" href="/" style="color: #F0F0F0; background-color: #6D6D6D;">$ commandlinefu.cn</a>
                <form class="navbar-form navbar-left" style="width: 366px;">
                    <div class="input-group" style="visibility: hidden">
                        <div class="input-group-addon">
                                <i class="glyphicon glyphicon-search"></i>
                        </div>
                        <input id="search-query" type="text" class="form-control " placeholder="grep ..." autocomplete="off" />
                    </div>
                    <section id="search-results" style="display: none; position: absolute; width:335px">
                        <div class="entries">
                        </div>
                    </section>
                </form>
                <div class="pull-right" style="padding-top:15px; ">
                    <wb:follow-button uid="2674868673" type="red_1" width="67" height="24" ></wb:follow-button>
                </div>
            </div>
        </div>

        <div class="container">

          {{ content }}

          <hr>
          <div id="footer">
              <div class="container">
                  <p>© 2013 commandlinefu.cn 及<a href="/contributors.html">贡献者们</a> | Hosted by <a href="http://www.qiniu.com/">七牛存储</a> Powered by <a href="http://jekyllrb.com">jekyll</a></p>
              </div>
          </div>
        </div>

        {% raw %}
        <script id="search-results-template" type="text/mustache">
        <ul class="list-group">
        {{#entries}}
        <li class="list-group-item ellipsis">
        <a href="{{url}}">{{title}}</a>
        </li>
        {{/entries}}
        </ul>
        </script>

        {% endraw %}

        <script type="text/javascript">
        $(function() {
            
            var item = $('.list-group-item:first');

            var search = $('#search-query').lunrSearch(); 
            
            var g = $('.list-group');

            var makeitem = function(d){
                var n = item.clone();
                n.find('.list-group-item-heading').text(d.title);
                n.find('code').text(d.body);
                n.attr('href', d.url);
                return n;
            }

            var t = setInterval(function(){
                if(search.lunr.data){
                    clearInterval(t);
                    g.waypoint({
                        handler: function (direction) {
                            if (direction === 'down' || direction === 'right') {
                                g.waypoint('disable');
                                var entries = search.lunr.data.entries;
                                setTimeout(function(){
                                    for (var i = 0; i < 50; i++){
                                        g.append(makeitem(entries[Math.floor(Math.random() * entries.length)]));
                                    }
                                    g.waypoint('enable');
                                }, 200);
                            }
                        },
                        offset: 'bottom-in-view'
                    });
                }
            }, 200);

        });
        </script>

        <a href="https://github.com/tg123/commandlinefu.cn"><img style="z-index: 1000000; position: fixed; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-45953410-1', 'commandlinefu.cn');
          ga('send', 'pageview');

        </script>
    </body>
</html>
